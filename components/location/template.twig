{% from "@components/heading/macro.twig" import sbHeading %}
{% from "@components/prose/macro.twig" import sbProse %}

{% set expandable = false %}
{% if params.accessibility_info or params.travel_info %}{% set expandable = true %}{% endif %}

{% set commonAttributes %}
	itemprop="location"
	itemscope itemtype="http://schema.org/Place"
	data-module="sb-location"
    class="sb-location {%- if expandable %} sb-location--interactive{% endif %} {%- if params.classes %} {{ params.classes }}{% endif %}"
    {%- for attribute, value in params.attributes %} {{ attribute }}="{{ value }}"{% endfor %}
{% endset %}

{% set summary %}
	<div class="sb-location__summary">
		{{ sbHeading({
			classes: 'sb-location__name',
			hierarchy: 3,
			element: 'strong',
			html: params.name,
			attributes: { "itemprop": "name" }
		}) }}
		<div class="sb-location__address" itemprop="address">
			{{ params.address }}
		</div>
	</div>
{% endset %}

{%- if expandable %}
	<details
		{{ commonAttributes }}
	    {%- if params.open %}open{% endif %}>
	    <summary>
	    	{{ summary }}
	    </summary>
	    <div class="sb-location__inner">
			{% set prose %}
				{%- if params.travel_info %}
					<h4>Travel information</h4>
					{{ params.travel_info }}
				{%- endif %}
				{%- if params.accessibility_info %}
					<h4>Accessibility</h4>
					{{ params.accessibility_info }}
				{%- endif %}
			{% endset %}
			{{ sbProse({
				html: prose
			}) }}
	    </div>
	</details>
{%- else %}
	<div {{ commonAttributes }}>
		{{ summary }}
	</div>
{%- endif %}