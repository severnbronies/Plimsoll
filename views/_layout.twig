{% include 'global-partials/html-head.twig' %}
{% from '@components/skiplink/macro.twig' import sbSkiplink %}
{% from '@components/phase-banner/macro.twig' import sbPhaseBanner %}
{% from '@components/banner/macro.twig' import sbBanner %}

<body class="{{ body_class }}">
	
	{{ sbSkiplink({
		href: '#content',
		text: 'Skip to content'
	}) }}

	{{ sbPhaseBanner({
		heading: phase_banner_title,
		subheading: phase_banner_subtitle,
		html: phase_banner_description
	}) }}

	{%- for banner in banners %}
		{% set bannerId = 'sbAlert-' ~ function('md5', banner.banner_text) %}
		{%- if getCookie(bannerId) == false %}
			{{ sbBanner({
				id: bannerId,
				html: banner.banner_text,
				dismissable: banner.banner_dismissable
			}) }}
		{%- endif %}
	{%- endfor %}

	{% block header %}
		{% include "global-partials/header.twig" %}
	{% endblock %}

	<main id="content" role="main">
		{% block main %}
			<p>No page content was found. :(</p>
		{% endblock %}
	</main>

	{% block footer %}
		{% include "global-partials/footer.twig" %}
	{% endblock %}

	<script src="{{ site.theme.link }}/dist/js/all.js"></script>
	<script>window.sb.initAll();</script>

	<!-- Cookie Control -->
	<script src="https://cc.cdn.civiccomputing.com/9/cookieControl-9.x.min.js"></script>
	<script>
		var config = {
			apiKey: '1560c340d7218c3d52b19d38f1a583aad92bcfce',
			product: 'COMMUNITY',
			optionalCookies: [
				{
					name: 'analytics',
					label: 'Analytics',
					description: '',
					cookies: ['_ga', '_gid', '_gat', 'APM_TOKEN', '_gac_*'],
					onAccept : function(){
						var script = document.createElement("script");
						script.src = "https://www.googletagmanager.com/gtag/js?id=UA-34034973-1";
						document.body.appendChild(script);
						window.dataLayer = window.dataLayer || [];
						function gtag(){dataLayer.push(arguments);}
						gtag('js', new Date());
						gtag('config', 'UA-34034973-1');
					},
					onRevoke: function(){
						window['ga-disable-UA-34034973-1'] = true;
					}
				}
			],
			position: 'LEFT',
			theme: 'DARK'
		};
		CookieControl.load( config );
	</script>

	{{ function('wp_footer') }}
</body>